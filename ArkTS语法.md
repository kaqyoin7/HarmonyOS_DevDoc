## å£°æ˜

ArkTSé€šè¿‡å£°æ˜å¼•å…¥å˜é‡ã€å¸¸é‡ã€å‡½æ•°å’Œç±»å‹ã€‚

### **å˜é‡å£°æ˜**

ä»¥å…³é”®å­—letå¼€å¤´çš„å£°æ˜å¼•å…¥å˜é‡ï¼Œè¯¥å˜é‡åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´å¯ä»¥å…·æœ‰ä¸åŒçš„å€¼ã€‚

```typescript
let hi: string = 'hello';hi = 'hello, world';
```

### **å¸¸é‡å£°æ˜**

ä»¥å…³é”®å­—constå¼€å¤´çš„å£°æ˜å¼•å…¥åªè¯»å¸¸é‡ï¼Œè¯¥å¸¸é‡åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ã€‚

```typescript
const hello: string = 'hello';
```

å¯¹å¸¸é‡é‡æ–°èµ‹å€¼ä¼šé€ æˆç¼–è¯‘æ—¶é”™è¯¯ã€‚

#### **è‡ªåŠ¨ç±»å‹æ¨æ–­**

ç”±äºArkTSæ˜¯ä¸€ç§é™æ€ç±»å‹è¯­è¨€ï¼Œæ‰€æœ‰æ•°æ®çš„ç±»å‹éƒ½å¿…é¡»åœ¨ç¼–è¯‘æ—¶ç¡®å®šã€‚

ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æˆ–å¸¸é‡çš„å£°æ˜åŒ…å«äº†åˆå§‹å€¼ï¼Œé‚£ä¹ˆå¼€å‘è€…å°±ä¸éœ€è¦æ˜¾å¼æŒ‡å®šå…¶ç±»å‹ã€‚ArkTSè§„èŒƒä¸­åˆ—ä¸¾äº†æ‰€æœ‰å…è®¸è‡ªåŠ¨æ¨æ–­ç±»å‹çš„åœºæ™¯ã€‚

ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä¸¤æ¡å£°æ˜è¯­å¥éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œä¸¤ä¸ªå˜é‡éƒ½æ˜¯stringç±»å‹ï¼š

```typescript
let hi1: string = 'hello';
let hi2 = 'hello, world';
```

### typeçš„ä½¿ç”¨

#####  ä¸€ã€`type` æ˜¯ä»€ä¹ˆï¼Ÿ

`type` æ˜¯ TypeScript æä¾›çš„ä¸€ç§ **ç±»å‹åˆ«åå®šä¹‰æ–¹å¼**ï¼Œç”¨äºä¸ºç±»å‹ã€å¯¹è±¡ç»“æ„ã€è”åˆç±»å‹ã€å‡½æ•°ç±»å‹ç­‰åˆ›å»ºåˆ«åã€‚

```typescript
type MyString = string;
```

------

#####  äºŒã€åŸºç¡€ç±»å‹åˆ«å

```typescript
type ID = number;
type Name = string;
```

> ğŸ’¡ ç”¨äºç®€åŒ–ä»£ç ã€å¢å¼ºå¯è¯»æ€§ã€‚

------

#####  ä¸‰ã€å¯¹è±¡ç±»å‹åˆ«å

```typescript
type User = {
  id: number;
  name: string;
  isActive: boolean;
};
```

------

#####  å››ã€è”åˆç±»å‹ï¼ˆUnion Typesï¼‰

```typescript
type Status = "success" | "error" | "loading";

type ID = number | string;
```

------

##### äº”ã€äº¤å‰ç±»å‹ï¼ˆIntersection Typesï¼‰

```typescript
type A = { x: number };
type B = { y: number };
type C = A & B; // C ç°åœ¨æ˜¯ { x: number, y: number }
```

------

#####  å…­ã€å‡½æ•°ç±»å‹åˆ«å

```typescript
type BinaryFunc = (a: number, b: number) => number;

const add: BinaryFunc = (x, y) => x + y;
```

------

#####  ä¸ƒã€æ³›å‹ç±»å‹åˆ«å

```typescript
type Result<T> = {
  data: T;
  error: string | null;
};

const response: Result<string> = {
  data: "Hello",
  error: null
};
```

------

#####  å…«ã€æ¡ä»¶ç±»å‹ï¼ˆé«˜çº§ç”¨æ³•ï¼‰

```typescript
type IsString<T> = T extends string ? "yes" : "no";

type A = IsString<string>; // "yes"
type B = IsString<number>; // "no"
```

------

#####  ä¹ã€æ˜ å°„ç±»å‹ï¼ˆç”¨äºç±»å‹è½¬æ¢ï¼‰

```typescript
type Keys = "name" | "age";
type Info = {
  [K in Keys]: string;
};
// ç­‰ä»·äºï¼š
// type Info = {
//   name: string;
//   age: string;
// }
```

------

##### åã€é€’å½’ç±»å‹

```typescript
type JSONValue = 
  | string 
  | number 
  | boolean 
  | null 
  | JSONValue[] 
  | { [key: string]: JSONValue };
```

> ç”¨äºè¡¨ç¤ºé€’å½’ç»“æ„ï¼Œå¦‚ JSONã€‚



##### åä¸€ã€ç±»å‹ç»„åˆæŠ€å·§

```typescript
type ID = number | string;
type User = {
  id: ID;
  name: string;
};

type Admin = User & {
  role: "admin";
};
```





## å‡½æ•°

### 1.æ˜¾å¼å‘½åå‡½æ•°è¡¨è¾¾å¼

```typescript
const greet = function sayHello(name: string): void {
  console.log("Hello, " + name);
};
```

è¿™æ—¶å‡½æ•°ä½“å†…å¯ä»¥ä½¿ç”¨ `sayHello()` æ¥é€’å½’æˆ–å¼•ç”¨è‡ªå·±ï¼š

```typescript
console.log(greet.name); // ğŸ‘‰ è¾“å‡ºï¼š'sayHello'
```

ä½†æ³¨æ„ï¼š`sayHello` åªåœ¨å‡½æ•°ä½“å†…å¯è§ï¼Œå¤–éƒ¨ä¸èƒ½ç”¨å®ƒè®¿é—®å‡½æ•°ã€‚

> å‡½æ•°è¡¨è¾¾å¼ä¸­çš„å‘½åï¼ˆå¦‚ `sayHello`ï¼‰**åªåœ¨å‡½æ•°ä½“å†…æœ‰æ•ˆ**ï¼Œæ˜¯**å±€éƒ¨ç§æœ‰æ ‡è¯†ç¬¦**ï¼Œå¤–éƒ¨å¿…é¡»é€šè¿‡èµ‹å€¼å˜é‡åï¼ˆ `greet`ï¼‰æ¥è®¿é—®ã€‚(sayHelloä¸ºå±€éƒ¨åç§°)

```typescript
const greet = function sayHello(name: string): void {
  if (name) {
    console.log("Hello, " + name);
  } else {
    sayHello("guest"); // âœ… å¯åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨å‡½æ•°å
  }
};

greet();      // âœ… è°ƒç”¨å‡½æ•°
sayHello();   // âŒ Error: Cannot find name 'sayHello'

```



### 2. åŒ¿åå‡½æ•°è¡¨è¾¾å¼ï¼ˆæœ€å¸¸è§ï¼‰

```typescript
const greet = function(name: string): void {
  console.log("Hello, " + name);
};
```

è¿™ä¸ªå‡½æ•°æœ¬èº«æ˜¯ **åŒ¿åçš„**ï¼Œä½†å› ä¸ºèµ‹å€¼ç»™äº† `greet`ï¼Œæ‰€ä»¥ï¼š

```typescript
console.log(greet.name); // ğŸ‘‰ è¾“å‡ºï¼š'greet'
```

å¼•æ“åœ¨èµ‹å€¼æ—¶è‡ªåŠ¨æŠŠå˜é‡åèµ‹ç»™å‡½æ•°çš„ `.name` å±æ€§ã€‚



### 3. ç®­å¤´å‡½æ•° (Lambdaå‡½æ•°)

```typescript
let sum = (x: number, y: number): number => {
  return x + y;
}
```

>  ç®­å¤´å‡½æ•°çš„**è¿”å›ç±»å‹**å¯ä»¥**çœç•¥**ï¼›çœç•¥æ—¶ï¼Œè¿”å›ç±»å‹é€šè¿‡å‡½æ•°ä½“æ¨æ–­ã€‚
>
>  è¡¨è¾¾å¼å¯ä»¥æŒ‡å®šä¸ºç®­å¤´å‡½æ•°ï¼Œä½¿è¡¨è¾¾æ›´ç®€çŸ­ï¼Œå› æ­¤ä»¥ä¸‹ä¸¤ç§è¡¨è¾¾æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼š

```typescript
let sum1 = (x: number, y: number) => { return x + y; }
let sum2 = (x: number, y: number) => x + y;	//å½“ä¸”ä»…å½“å‡½æ•°ä½“æ˜¯å•ä¸ªè¡¨è¾¾å¼æ—¶å¯ä»¥ä½¿ç”¨,è¡¨è¾¾å¼çš„ç»“æœä¼šè¢«éšå¼ä½œä¸ºè¿”å›å€¼è¿”å›
```

åœ¨çœç•¥å‡½æ•°ä½“æ‹¬å·çš„å‡½æ•°å®šä¹‰ä¸­ï¼Œé»˜è®¤è¯¥è¯­å¥ä¸ºè¿”å›å€¼ï¼›

> [!important] 
>
> è‹¥éœ€è¦å®ç°æ— è¿”å›å€¼ï¼Œåˆ™éœ€æ˜¾ç¤ºè¡¨æ˜è¿”å›å€¼ä¸ºvoidï¼Œå¦åˆ™ä¼šæ ¹æ®ç±»å‹æ¨æ–­è‡ªåŠ¨æ¨æ–­è¿”å›ç±»å‹å¹¶å°†è¯­å¥ç»“æœè¿”å›
>
> ```typescript
> const g = () => 123;  // è¿”å›ç±»å‹è‡ªåŠ¨æ¨æ–­ä¸º numberï¼Œä¸æ˜¯ void
> const g = () => { 123; }; // å®é™…ä¸Šè¿”å› voidï¼Œ123 åªæ˜¯è¢«æ‰§è¡Œä½†æœªè¿”å›
> const g = () => { console.log('hi'); }//æ¨æ–­ä¸º void
> ```



### å¯é€‰å‚æ•°

å¯é€‰å‚æ•°çš„æ ¼å¼å¯ä¸ºname?: Typeã€‚

```typescript
function hello(name?: string) {
  if (name == undefined) {
    console.log('Hello!');
  } else {
    console.log(`Hello, ${name}!`);
  }
}
```

å¯é€‰å‚æ•°çš„å¦ä¸€ç§å½¢å¼ä¸ºè®¾ç½®çš„å‚æ•°é»˜è®¤å€¼ã€‚å¦‚æœåœ¨å‡½æ•°è°ƒç”¨ä¸­è¿™ä¸ªå‚æ•°è¢«çœç•¥äº†ï¼Œåˆ™ä¼šä½¿ç”¨æ­¤å‚æ•°çš„é»˜è®¤å€¼ä½œä¸ºå®å‚ã€‚

```typescript
function multiply(n: number, coeff: number = 2): number {
  return n * coeff;
}
multiply(2);  // è¿”å›2*2
multiply(2, 3); // è¿”å›2*3
```



### Restå‚æ•°

> ä½¿ç”¨ Rest å‚æ•°æ—¶å‚æ•°å˜é‡åå‰å¿…é¡»ä½¿ç”¨`...`ï¼Œä¸ºè¯­æ³•è§„å®š

å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯restå‚æ•°ã€‚restå‚æ•°çš„æ ¼å¼ä¸º...restArgsã€‚restå‚æ•°å…è®¸å‡½æ•°æ¥æ”¶ä¸€ä¸ªç”±å‰©ä½™å®å‚ç»„æˆçš„æ•°ç»„ï¼Œç”¨äºå¤„ç†ä¸å®šæ•°é‡çš„å‚æ•°è¾“å…¥ã€‚

```typescript
function sum(...numbers: number[]): number {  
    let res = 0;  
    for (let n of numbers)    
        res += n;  
    return res;}
sum(); // è¿”å›0
sum(1, 2, 3); // è¿”å›6
```

### è¿”å›ç±»å‹

å¦‚æœå¯ä»¥ä»å‡½æ•°ä½“å†…æ¨æ–­å‡ºå‡½æ•°è¿”å›ç±»å‹ï¼Œåˆ™å¯åœ¨å‡½æ•°å£°æ˜ä¸­çœç•¥æ ‡æ³¨è¿”å›ç±»å‹ã€‚

```typescript
// æ˜¾å¼æŒ‡å®šè¿”å›ç±»å‹
function foo(): string { return 'foo'; }
// æ¨æ–­è¿”å›ç±»å‹ä¸ºstring
function goo() { return 'goo'; }
```

ä¸éœ€è¦è¿”å›å€¼çš„å‡½æ•°çš„è¿”å›ç±»å‹å¯ä»¥æ˜¾å¼æŒ‡å®šä¸ºvoidæˆ–çœç•¥æ ‡æ³¨ã€‚è¿™ç±»å‡½æ•°ä¸éœ€è¦è¿”å›è¯­å¥ã€‚

ä»¥ä¸‹ç¤ºä¾‹ä¸­ä¸¤ç§å‡½æ•°å£°æ˜æ–¹å¼éƒ½æ˜¯æœ‰æ•ˆçš„ï¼š

```typescript
function hi1() { console.log('hi'); }
function hi2(): void { console.log('hi'); }
```



### ä½¿ç”¨typeè¿›è¡Œå‡½æ•°ç±»å‹å®šä¹‰

>  ==***å‡½æ•°ç±»å‹å®šä¹‰***çš„ä½œç”¨ä¸ºæŒ‡å®šå‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼ˆå‚æ•°ä¸ªæ•°ï¼Œæ¯ä¸ªå‚æ•°çš„æ•°æ®ç±»å‹ï¼‰ä¸è¿”å›å€¼ç±»å‹==
>
>  ä»ä¸ºä¸€ç§å°è£…æ€æƒ³ï¼Œå°è£…å‡½æ•°**ç±»å‹**çš„å®šä¹‰ï¼Œè‹¥å¤šæ¬¡ä½¿ç”¨åˆ°è¯¥å‡½æ•°ç±»å‹ï¼Œå°è£…åä¸‹æ¬¡å£°æ˜æˆ–å®šä¹‰å‡½æ•°æ—¶å°±æ— éœ€å†é‡å¤å®šä¹‰å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹



1. **å®šä¹‰å‡½æ•°ç±»å‹ï¼š**

```typescript
type trigFunc = (x: number) => number;
```

è¿™åªæ˜¯å®šä¹‰äº†â€œç±»å‹ç»“æ„â€ï¼Œå®ƒå‘Šè¯‰ä½ å‡½æ•°åº”è¯¥æ˜¯â€œæ¥å—ä¸€ä¸ª `number` ç±»å‹çš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª `number` ç±»å‹çš„ç»“æœâ€ã€‚

1. **å…·ä½“å®ç°å‡½æ•°ï¼š**

```typescript
const sinFunc: trigFunc = (x) => Math.sin(x);	//è¯¦è§lambdaå‡½æ•°
const square: trigFunc = (x) => x * x;	//è¯¦è§lambdaå‡½æ•°
```

ä½¿ç”¨ `const` æ¥å®šä¹‰äº†å‡½æ•° `sinFunc` å’Œ `square`ï¼Œå®ƒä»¬éƒ½æ˜¯ç¬¦åˆ `trigFunc` ç±»å‹ç»“æ„çš„å…·ä½“å®ç°ã€‚



æ³¨æ„è¯¥å¤„ï¼ˆä½¿ç”¨typeï¼‰å¹¶éä¸ºä½¿ç”¨lambdaè¡¨è¾¾å¼è¿›è¡Œ~~**å‡½æ•°å®šä¹‰**~~ï¼Œè€Œæ˜¯**å‡½æ•°ç±»å‹å®šä¹‰**

* å‡½æ•°å®šä¹‰ï¼ˆä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼‰ï¼š`const/let å‡½æ•°å = (å‚æ•°åˆ—è¡¨):è¿”å›ç±»å‹ => {å‡½æ•°ä½“}` 

* å‡½æ•°ç±»å‹å®šä¹‰ï¼š`type å‡½æ•°ç±»å‹å = (å‚æ•°åˆ—è¡¨) => è¿”å›ç±»å‹`

##### 1. `type` ç”¨äºå®šä¹‰**å‡½æ•°ç±»å‹**ï¼ˆæè¿°å‡½æ•°çš„ç»“æ„ï¼‰

```typescript
type trigFunc = (x: number) => number;
```

##### 2.`const` ç”¨äºå®šä¹‰**ç®­å¤´å‡½æ•°çš„å®ç°**

```typescript
const sinFunc = (x: number): number => Math.sin(x);
```



> å‡½æ•°ç±»å‹é€šå¸¸ç”¨äºå®šä¹‰å›è°ƒï¼š
>
> ```typescript
> type trigFunc = (x: number) => number // è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹
> 
> function do_action(f: trigFunc) {
> f(3.141592653589); // è°ƒç”¨å‡½æ•°
> }
> 
> do_action(Math.sin); // å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥
> ```



### ç®­å¤´å‡½æ•°ï¼ˆLambdaå‡½æ•°ï¼‰

å‡½æ•°å¯ä»¥å®šä¹‰ä¸ºç®­å¤´å‡½æ•°ï¼Œä¾‹å¦‚ï¼š

```typescript
let sum = (x: number, y: number): number => {  return x + y;}
```

ç®­å¤´å‡½æ•°çš„è¿”å›ç±»å‹å¯ä»¥çœç•¥ï¼›çœç•¥æ—¶ï¼Œè¿”å›ç±»å‹é€šè¿‡å‡½æ•°ä½“æ¨æ–­ã€‚

è¡¨è¾¾å¼å¯ä»¥æŒ‡å®šä¸ºç®­å¤´å‡½æ•°ï¼Œä½¿è¡¨è¾¾æ›´ç®€çŸ­ï¼Œå› æ­¤ä»¥ä¸‹ä¸¤ç§è¡¨è¾¾æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼š

```typescript
let sum1 = (x: number, y: number) => { return x + y; }
let sum2 = (x: number, y: number) => x + y;
```



### é—­åŒ…

> **â€œé—­åŒ…â€æŒ‡çš„æ˜¯å†…å±‚å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯é‚£ä¸ªè¢«è¿”å›æˆ–ä¼ é€’çš„å‡½æ•°ï¼‰ï¼Œä»¥åŠå®ƒâ€œæ•è·â€çš„å¤–å±‚ä½œç”¨åŸŸç¯å¢ƒã€‚**
>
> é—­åŒ… = å†…å±‚å‡½æ•°( `g()` ) + å¤–å±‚å‡½æ•°çš„å˜é‡ç¯å¢ƒ( `count` )
>
> ***é€šä¿—è§£é‡Šï¼š***
>
> * å¤–å±‚å‡½æ•° **åˆ›å»ºä½œç”¨åŸŸ**ï¼ˆä¸º`count`åˆ†é…å†…å­˜ï¼‰
>
> * å†…å±‚å‡½æ•° **æ•è·è¿™ä¸ªä½œç”¨åŸŸ**ï¼ˆèƒ½å¤Ÿä½¿ä¸º`count`æ‰€åˆ†é…çš„å†…å­˜ä¸è¢«é”€æ¯ï¼šåœ¨å†…å±‚å‡½æ•°ä»è¢«å¼•ç”¨çš„æƒ…å†µä¸‹ï¼‰
>
> * å½“å¤–å±‚å‡½æ•°ï¼ˆ`f`ï¼‰æ‰§è¡Œå®Œæ¯•åï¼Œ**è¿™ä¸ªä½œç”¨åŸŸæœ¬åº”é”€æ¯**
>
> * ä½†åªè¦å†…å±‚å‡½æ•°ï¼ˆ`g`ï¼‰è¿˜å­˜åœ¨(å°šè¢«å…¶ä»–å˜é‡æ‰€å¼•ç”¨ï¼šè¢«`z`æ‰€å¼•ç”¨)ï¼Œå®ƒå°±<span style="background:white;color:green">â€œé—­ä½â€äº†è¿™å—ä½œç”¨åŸŸ(`count`)çš„å†…å­˜ç©ºé—´ï¼ˆå› ä¸º`g()`ä¸­ä½¿ç”¨åˆ°`count`ï¼Œå¹¶ä¸”`g()`ä»åœ¨è¢«å¼•ç”¨ï¼Œæ— æ³•ç›´æ¥é”€æ¯å…¶å†…å­˜ï¼‰ï¼Œäºæ˜¯è¿™ä¸ªâ€œé—­ä½çš„ä½œç”¨åŸŸâ€å°±è¢«ç§°ä½œ**é—­åŒ…ï¼ˆClosureï¼‰**</span>



==é—­åŒ…å°±æ˜¯å‡½æ•°â€œè®°ä½äº†â€å®ƒå®šä¹‰æ—¶çš„ä½œç”¨åŸŸï¼Œå³ä½¿åœ¨å¤–å±‚å‡½æ•°å·²ç»è¿”å›ä¹‹åï¼Œä»ç„¶å¯ä»¥è®¿é—®è¿™ä¸ªä½œç”¨åŸŸä¸­çš„å˜é‡ã€‚==

==å¯ä»¥æŠŠè¿”å›çš„å‡½æ•°ç†è§£ä¸ºä¸€ä¸ª**å·²ç»å°è£…äº†â€œç‰¹å®šä¸Šä¸‹æ–‡â€çš„å‡½æ•°å®ä¾‹ï¼Œè°ƒç”¨æ—¶åªéœ€è¦æä¾›å®ƒå°šæœªå°è£…çš„å‚æ•°éƒ¨åˆ†**==

```typescript
function f(): () => number {	//fçš„å‡½æ•°å®šä¹‰æ˜¯ä¼ ç»Ÿçš„å‡½æ•°å®šä¹‰æ–¹æ³•
    							//è€Œå…¶è¿”å›å€¼ç±»å‹å®šä¹‰ä½¿ç”¨çš„æ˜¯ç®­å¤´è¡¨è¾¾å¼ï¼Œæœ€å{}ä¸­çš„ä¾¿ä¸ºfçš„å‡½æ•°ä½“
  let count = 0;
  let g = (): number => { count++; return count; };
  return g;
}

let z = f();
z(); // è¿”å›ï¼š1
z(); // è¿”å›ï¼š2
```

> [!tip]
>
> `function f(): () => number { ... }`
>
> `f`ä¸ºä¸€ä¸ªå‡½æ•°
>
> ç¬¬ä¸€ä¸ª`()`ï¼š`f`ä¸æ¥å—ä»»ä½•å…¥å‚
>
> `:() => number`ï¼š`f`çš„è¿”å›å€¼ä¸ºä¸€ä¸ªå‡½æ•°
>
> `() => number`ï¼šè¿”å›å‡½æ•°åŒæ ·ä¸æ¥å—å…¥å‚ï¼Œå¹¶ä¸”è¿”å›å€¼ç±»å‹ä¸ºnumber
>
> `{}`ï¼š`f`çš„å‡½æ•°ä½“
>
> **`f` çš„è¿”å›å€¼ä¸ºå‡½æ•°ç±»å‹å®šä¹‰çš„å†™æ³•**



**å…³äºä¸ºä»€ä¹ˆ`count`å†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ï¼š**

> ```typescript
> function outer() {
> let count = 0; // count åªåœ¨ outer çš„ä½œç”¨åŸŸä¸­
> 
> return function inner() {
> count++;
> return count;
> };
> }
> ```
>
> - `inner()` æ˜¯åœ¨ `outer()` çš„ä½œç”¨åŸŸä¸­å®šä¹‰çš„ï¼Œæ‰€ä»¥å®ƒ**èƒ½è®¿é—® count**
> - å½“ `outer()` æ‰§è¡Œå®Œåï¼Œå®ƒæœ¬åº”è¯¥é”€æ¯æ‰€æœ‰å±€éƒ¨å˜é‡ï¼ˆå¦‚ countï¼‰
> - **ä½†æ˜¯ï¼** `inner()` ä»ç„¶è¢«å¤–éƒ¨å˜é‡æŒæœ‰ï¼ˆå¦‚ `let z = outer();`ï¼‰ï¼Œè¿™ä¸ªå‡½æ•°è¿˜åœ¨ä½¿ç”¨ `count`
>
> > ğŸ‘‰ æ‰€ä»¥ JS å¼•æ“ä¸ä¼šé‡Šæ”¾ `count`ï¼Œå› ä¸ºå®ƒè¿˜è¢« `inner()` **å¼•ç”¨**ç€ï¼

å½“è¿™ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œé—­åŒ…å˜é‡æ‰ä¼šè¢«é‡Šæ”¾ï¼š

1. **é—­åŒ…å‡½æ•°æœ¬èº«ä¸å†è¢«å¼•ç”¨**ï¼ˆæ¯”å¦‚å˜é‡æŒ‡å‘äº† nullï¼‰
2. **é—­åŒ…å‡½æ•°ä¹‹å¤–æ²¡æœ‰ä»»ä½•åœ°æ–¹å†å¼•ç”¨å®ƒè®¿é—®çš„å±€éƒ¨å˜é‡**



> æ›´å¤šç¤ºä¾‹ï¼š
>
> ```typescript
> function makeCounter() {		//ä¸æ˜¾ç¤ºæŒ‡å‡ºè¿”å›ç±»å‹ï¼Œç”±TSæ¨æ–­
> let count = 0;
> return () => ++count;
> }
> 
> const counterA = makeCounter();  // åˆ›å»ºä¸€ä¸ªé—­åŒ…
> const counterB = makeCounter();  // åˆåˆ›å»ºä¸€ä¸ªæ–°çš„é—­åŒ…
> 
> console.log(counterA()); // 1
> console.log(counterA()); // 2
> console.log(counterB()); // 1   <-- æ˜¯æ–°çš„ countï¼
> ```
>
> è¿”å›å‡½æ•°å¸¦å‚ï¼š
>
> ```typescript
> function outer(): (x: number) => number {
> let multiplier = 2;
> return function inner(x: number): number {
>  return x * multiplier;
> };
> }
> 
> let double = outer(); // double æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å— x: number
> console.log(double(5)); // è¾“å‡ºï¼š10
> console.log(double(7)); // è¾“å‡ºï¼š14
> ```
>
> è‡ªä¸»å£°æ˜é—­åŒ…æ‰€å¼•ç”¨å…¶çˆ¶å‡½æ•°å˜é‡(base)çš„å€¼
>
> ```typescript
> function createAdder(base: number): (x: number) => number {
> return (x: number) => base + x;
> }
> 
> const addFive = createAdder(5);  // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè®°ä½ base = 5
> console.log(addFive(10)); // è¾“å‡º 15
> console.log(addFive(3));  // è¾“å‡º 8
> 
> ```
>
> 

2. 



## ç±»

#### 1.ç±»çš„å®šä¹‰

```typescript
class Person {		//å®šä¹‰ç±»
  name: string = '';
  surname: string = '';
  constructor (n: string, sn: string) {
    this.name = n;
    this.surname = sn;
  }
  fullName(): string {
    return this.name + ' ' + this.surname;
  }
}
```

**å¯é€‰å˜é‡ï¼š**

> [!NOTE]
>
> å¦‚æœä½ å®šä¹‰äº†æ„é€ å‡½æ•°çš„å¯é€‰å‚æ•°ï¼Œä¾‹å¦‚ `color?: string`ï¼Œ**åœ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶æ²¡æœ‰ä¼ å…¥ `color` å‚æ•°ï¼Œé‚£ä¹ˆ `this.color = color` ä»ç„¶ä¼šæ‰§è¡Œ**ï¼Œåªä¸è¿‡å®ƒä¼šèµ‹å€¼ä¸º `undefined`



```typescript
class Car {
  brand: string;
  color?: string;  // å¯é€‰å±æ€§

  constructor(brand: string, color?: string) {
    this.brand = brand;
    this.color = color;  // ğŸ‘ˆ è¿™å¥ä»ç„¶ä¼šæ‰§è¡Œï¼
  }
}

let car1 = new Car("Toyota");
console.log(car1.color); // è¾“å‡ºï¼šundefined
```



#### 2. **å®ä¾‹åŒ–**

* ä½¿ç”¨newè¿›è¡Œå®ä¾‹åŒ–

```typescript
let p = new Person('John', 'Smith');
console.log(p.fullName());
```

* ä½¿ç”¨å¯¹è±¡å­—é¢é‡è¿›è¡Œå®ä¾‹åŒ–

```typescript
let p:person = {name: "JarBow", surname: "Fun"}
```



#### **3. å­—æ®µåˆå§‹åŒ–**

ä¸ºäº†å‡å°‘è¿è¡Œæ—¶çš„é”™è¯¯å’Œè·å¾—æ›´å¥½çš„æ‰§è¡Œæ€§èƒ½ï¼Œ

> [!CAUTION]
>
> ArkTSè¦æ±‚**æ‰€æœ‰å­—æ®µåœ¨å£°æ˜æ—¶æˆ–è€…æ„é€ å‡½æ•°ä¸­æ˜¾å¼åˆå§‹åŒ–**ã€‚è¿™å’Œæ ‡å‡†TSä¸­çš„ strictPropertyInitialization æ¨¡å¼ä¸€æ ·ã€‚
>
> ä»¥ä¸‹ä»£ç æ˜¯åœ¨ArkTSä¸­<span style="color:red">ä¸åˆæ³•çš„ä»£ç </span>ã€‚

> å­—æ®µï¼šç›´æ¥åœ¨ç±»ä¸­å£°æ˜çš„æŸç§ç±»å‹çš„å˜é‡

```typescript
class Person {
  name: string; // undefined
  
  setName(n:string): void {
    this.name = n;
  }
  
  getName(): string {
    // å¼€å‘è€…ä½¿ç”¨"string"ä½œä¸ºè¿”å›ç±»å‹ï¼Œè¿™éšè—äº†nameå¯èƒ½ä¸º"undefined"çš„äº‹å®ã€‚
    // æ›´åˆé€‚çš„åšæ³•æ˜¯å°†è¿”å›ç±»å‹æ ‡æ³¨ä¸º"string | undefined"ï¼Œä»¥å‘Šè¯‰å¼€å‘è€…è¿™ä¸ªAPIæ‰€æœ‰å¯èƒ½çš„è¿”å›å€¼ã€‚
    return this.name;
  }
}

let jack = new Person();
// å‡è®¾ä»£ç ä¸­æ²¡æœ‰å¯¹nameèµ‹å€¼ï¼Œå³æœªè°ƒç”¨"jack.setName('Jack')"
jack.getName().length; // è¿è¡Œæ—¶å¼‚å¸¸ï¼šname is undefined
```

`ArkTS` ä¸­çš„æ­£ç¡®å†™æ³•

```typescript
class Person {
  name: string = '';
  
  setName(n:string): void {
    this.name = n;
  }
  
  // ç±»å‹ä¸º'string'ï¼Œä¸å¯èƒ½ä¸º"null"æˆ–è€…"undefined"
  getName(): string {
    return this.name;
  }
}
  

let jack = new Person();
// å‡è®¾ä»£ç ä¸­æ²¡æœ‰å¯¹nameèµ‹å€¼ï¼Œä¾‹å¦‚è°ƒç”¨"jack.setName('Jack')"
jack.getName().length; // 0, æ²¡æœ‰è¿è¡Œæ—¶å¼‚å¸¸
```

æ¥ä¸‹æ¥çš„ä»£ç å±•ç¤ºäº†å¦‚æœnameçš„å€¼å¯ä»¥æ˜¯undefinedï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•å†™ä»£ç ã€‚

```typescript
class Person {
  name?: string; // å¯èƒ½ä¸º`undefined`

  setName(n:string): void {
    this.name = n;
  }

  // ç¼–è¯‘æ—¶é”™è¯¯ï¼šnameå¯ä»¥æ˜¯"undefined"ï¼Œæ‰€ä»¥è¿™ä¸ªAPIçš„è¿”å›å€¼ç±»å‹ä¸èƒ½ä»…å®šä¹‰ä¸ºstringç±»å‹
  getNameWrong(): string {
    return this.name;
  }

  getName(): string | undefined { // è¿”å›ç±»å‹åŒ¹é…nameçš„ç±»å‹
    return this.name;
  }
}

let jack = new Person();
// å‡è®¾ä»£ç ä¸­æ²¡æœ‰å¯¹nameèµ‹å€¼ï¼Œä¾‹å¦‚è°ƒç”¨"jack.setName('Jack')"

// ç¼–è¯‘æ—¶é”™è¯¯ï¼šç¼–è¯‘å™¨è®¤ä¸ºä¸‹ä¸€è¡Œä»£ç æœ‰å¯èƒ½ä¼šè®¿é—®undefinedçš„å±æ€§ï¼ŒæŠ¥é”™
jack.getName().length;  // ç¼–è¯‘å¤±è´¥

jack.getName()?.length; // ç¼–è¯‘æˆåŠŸï¼Œæ²¡æœ‰è¿è¡Œæ—¶é”™è¯¯
```



#### **4. getterå’Œsetter**

setterå’Œgetterå¯ç”¨äºæä¾›å¯¹å¯¹è±¡å±æ€§çš„å—æ§è®¿é—®ã€‚

åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œsetterç”¨äºç¦æ­¢å°†_ageå±æ€§è®¾ç½®ä¸ºæ— æ•ˆå€¼ï¼š

```typescript
class Person {
  name: string = '';
  private _age: number = 0;

  // getterï¼ˆè¯»å– _ageï¼‰
  get age(): number {		//get:å…³é”®å­—
    return this._age;
  }

  // setterï¼ˆè®¾ç½® _ageï¼‰
  set age(x: number) {		//setï¼šå…³é”®å­—
    if (x < 0) {
      throw Error('Invalid age argument'); // é˜²æ­¢è´Ÿæ•°
    }
    this._age = x;
  }
}
```



| æˆå‘˜           | è¯´æ˜                                           |
| -------------- | ---------------------------------------------- |
| `private _age` | å®é™…å­˜å‚¨æ•°æ®çš„å­—æ®µï¼Œåªèƒ½åœ¨ç±»å†…éƒ¨è®¿é—®           |
| `get age()`    | è¯»å–å±æ€§æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¿”å› `_age` çš„å€¼   |
| `set age(x)`   | è®¾ç½®å±æ€§æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯ä»¥åŠ å…¥éªŒè¯é€»è¾‘ç­‰ |

```typescript
let p = new Person();

console.log(p.age);   // è‡ªåŠ¨è°ƒç”¨ get age()ï¼Œè¾“å‡ºï¼š0

p.age = 25;           // è‡ªåŠ¨è°ƒç”¨ set age(25)ï¼Œåˆæ³• âœ”ï¸

p.age = -42;          // è‡ªåŠ¨è°ƒç”¨ set age(-42)ï¼ŒæŠ›å‡ºå¼‚å¸¸ âŒ

```

| å¤–éƒ¨å†™æ³•     | å®é™…è¡Œä¸º               |
| ------------ | ---------------------- |
| `p.age`      | è‡ªåŠ¨è°ƒç”¨ `get age()`   |
| `p.age = 30` | è‡ªåŠ¨è°ƒç”¨ `set age(30)` |
| `_age`       | åªæ˜¯å†…éƒ¨ä¿å­˜æ•°æ®çš„å˜é‡ |



> å®è´¨ä¸Šä¸ºä¸€ç§ TypeScript çš„è¯­æ³•ç³–ï¼Œæä¾›äº†æ›´ä¼˜é›…çš„è®¿é—®æ–¹å¼ã€‚

çœ‹èµ·æ¥åƒåœ¨è¯»å†™å±æ€§ï¼š

```typescript
p.age = 20;
console.log(p.age);
```

ä½†å®é™…ä¸Šæ˜¯åœ¨è°ƒç”¨å‡½æ•°ï¼š

```typescript
p.setAge(20); // ä¼ ç»Ÿæ–¹å¼ï¼ˆJavaã€C++ï¼‰
p.getAge();
```

ä¾‹å¦‚ï¼š

```typescript
class Person {
  private _age = 0;

  get age() {
    console.log("è°ƒç”¨äº†getter");
    return this._age;
  }

  set age(value: number) {
    console.log("è°ƒç”¨äº†setter");
    this._age = value;
  }
}

let p = new Person();

p.age = 18; // æ§åˆ¶å°è¾“å‡ºï¼šè°ƒç”¨äº†setter
console.log(p.age); // æ§åˆ¶å°è¾“å‡ºï¼šè°ƒç”¨äº†getterï¼Œç„¶åè¾“å‡º 18

```



##### ä¸ºä»€ä¹ˆ`age`å‰éœ€è¦åŠ  `_` ?

 ğŸ”¹ `_age` æ˜¯**å†…éƒ¨å˜é‡ï¼ˆç§æœ‰ï¼‰**

- æ˜¯çœŸæ­£å­˜å‚¨æ•°æ®çš„åœ°æ–¹
- ä¸æƒ³è®©å¤–éƒ¨ç›´æ¥è®¿é—®å®ƒ

 ğŸ”¹ `age` æ˜¯**å¯¹å¤–æš´éœ²çš„æ¥å£(æœ¬è´¨ä¸Šä¸ºget/setæ–¹æ³•)**

- æä¾›ä¸€ä¸ªâ€œæ§åˆ¶è®¿é—®â€çš„é€šé“
- å¤–éƒ¨è®¿é—®çš„æ˜¯ `age`ï¼Œä½†èƒŒåæ“ä½œçš„æ˜¯ `_age`

å¦‚æœç›´æ¥å†™æˆï¼š

```typescript
set age(value: number) {
  this.age = value; // âŒ æ— é™é€’å½’è°ƒç”¨è‡ªå·±ï¼Œæ ˆæº¢å‡º
}
```

æ‰€ä»¥**å¼•å…¥ `_age`** ä½œä¸ºâ€œçœŸæ­£çš„æ•°æ®å®¹å™¨â€ï¼Œé¿å…å‘½åå†²çªã€é€»è¾‘æ··ä¹±ã€‚



##### âœï¸ å‘½åè§„èŒƒï¼š

çº¦å®šä¿—æˆçš„å‘½åæ–¹å¼ï¼Œå¹¶éè¯­æ³•å¼ºåˆ¶è¦æ±‚ï¼š

| å‘½å      | è¯´æ˜                         |
| --------- | ---------------------------- |
| `_å˜é‡å` | è¡¨ç¤ºâ€œå†…éƒ¨ç”¨ï¼Œä¸å»ºè®®ç›´æ¥è®¿é—®â€ |
| `å˜é‡å`  | è¡¨ç¤ºâ€œå¯¹å¤–æš´éœ²â€çš„å±æ€§å       |



> [!tip]
>
> ##### **æœ€ä½³å®è·µï¼ˆMaybeï¼‰**
>
> è‹¥ä¸éµå¾ª TS è§„èŒƒï¼Œæ²¿ç”¨ Java ä¹ æƒ¯ï¼Œå¯åœ¨å®šä¹‰å˜é‡æ—¶ä¸åŠ `_`ï¼Œè€Œæ˜¯åœ¨å®šä¹‰`getter/setter`æ—¶å°†æ–¹æ³•åå®šä¹‰ä¸º`getAttribute()`çš„å½¢å¼ï¼Œæ­¤æ—¶åœ¨è®¿é—®å±æ€§æ—¶å³å¯ä½¿ç”¨ `object.getAttribute`;

##### æ‹“å±•

åªå®šä¹‰ä¸€ä¸ª `getter` è€Œä¸å®šä¹‰ `setter`ï¼Œè¿™æ ·å±æ€§å°±æ˜¯**åªè¯»çš„**ï¼š

```typescript
class Circle {
  constructor(private radius: number) {}
  get area() {
    return Math.PI * this.radius ** 2;
  }
}

const c = new Circle(5);
console.log(c.area); // âœ… å¯ä»¥è¯»å–
c.area = 100;        // âŒ æŠ¥é”™ï¼šæ— æ³•åˆ†é…åªè¯»å±æ€§
```

`private radius: number` æ˜¯ æ„é€ å‡½æ•°å‚æ•°å±æ€§çš„ç®€å†™å½¢å¼ï¼Œç›¸å½“äºï¼š

```typescript
private radius: number æ˜¯ æ„é€ å‡½æ•°å‚æ•°å±æ€§ï¼ˆParameter Propertiesï¼‰ çš„ç®€å†™å½¢å¼ï¼Œç›¸å½“äºï¼š
```



#### 5.ç»§æ‰¿

ä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿å¦ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºåŸºç±»ï¼‰ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹è¯­æ³•å®ç°å¤šä¸ªæ¥å£ï¼š

```typescript
class [extends BaseClassName] [implements listOfInterfaces] {
  // ...
}
```

ç»§æ‰¿ç±»ç»§æ‰¿åŸºç±»çš„å­—æ®µå’Œæ–¹æ³•ï¼Œä½†ä¸ç»§æ‰¿æ„é€ å‡½æ•°ã€‚ç»§æ‰¿ç±»å¯ä»¥æ–°å¢å®šä¹‰å­—æ®µå’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è¦†ç›–å…¶åŸºç±»å®šä¹‰çš„æ–¹æ³•ã€‚

åŸºç±»ä¹Ÿç§°ä¸ºâ€œçˆ¶ç±»â€æˆ–â€œè¶…ç±»â€ã€‚ç»§æ‰¿ç±»ä¹Ÿç§°ä¸ºâ€œæ´¾ç”Ÿç±»â€æˆ–â€œå­ç±»â€ã€‚

ç¤ºä¾‹ï¼š

```typescript
class Person {
  name: string = '';
  private _age = 0;
  get age(): number {
    return this._age;
  }
}
class Employee extends Person {
  salary: number = 0;
  calculateTaxes(): number {
    return this.salary * 0.42;
  }
}
```

åŒ…å«implementså­å¥çš„ç±»å¿…é¡»å®ç°åˆ—å‡ºçš„æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ï¼Œä½†ä½¿ç”¨é»˜è®¤å®ç°å®šä¹‰çš„æ–¹æ³•é™¤å¤–ã€‚

```typescript
interface DateInterface {
  now(): string;
}
class MyDate implements DateInterface {
  now(): string {
    // åœ¨æ­¤å®ç°
    return 'now';
  }
}
```

å…³é”®å­—superå¯ç”¨äºè®¿é—®çˆ¶ç±»çš„å®ä¾‹å­—æ®µã€å®ä¾‹æ–¹æ³•å’Œæ„é€ å‡½æ•°ã€‚åœ¨å®ç°å­ç±»åŠŸèƒ½æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥å…³é”®å­—ä»çˆ¶ç±»ä¸­è·å–æ‰€éœ€æ¥å£ï¼š

```typescript
class RectangleSize {
  protected height: number = 0;
  protected width: number = 0;

  constructor (h: number, w: number) {
    this.height = h;
    this.width = w;
  }

  draw() {
    /* ç»˜åˆ¶è¾¹ç•Œ */
  }
}
class FilledRectangle extends RectangleSize {
  color = ''
  constructor (h: number, w: number, c: string) {
    super(h, w); // çˆ¶ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨
    this.color = c;
  }

  draw() {
    super.draw(); // çˆ¶ç±»æ–¹æ³•çš„è°ƒç”¨
    // super.height -å¯åœ¨æ­¤å¤„ä½¿ç”¨
    /* å¡«å……çŸ©å½¢ */
  }
}
```



#### **6. æ–¹æ³•é‡è½½**

é€šè¿‡é‡è½½ç­¾åï¼ŒæŒ‡å®šæ–¹æ³•çš„ä¸åŒè°ƒç”¨ã€‚å…·ä½“æ–¹æ³•ä¸ºï¼Œä¸ºåŒä¸€ä¸ªæ–¹æ³•å†™å…¥å¤šä¸ªåŒåä½†ç­¾åä¸åŒçš„æ–¹æ³•å¤´ï¼Œæ–¹æ³•å®ç°ç´§éšå…¶åã€‚

> **ç­¾åï¼ˆSignatureï¼‰** æŒ‡çš„æ˜¯å‡½æ•°çš„**åç§° + å‚æ•°åˆ—è¡¨ + è¿”å›ç±»å‹**çš„ç»„åˆã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºå‡½æ•°å¯¹â€œä½ å¯ä»¥æ€ä¹ˆè°ƒç”¨æˆ‘â€çš„ä¸€ç§å£°æ˜ã€‚

```typescript
class C {
  foo(x: number): void;            /* ç¬¬ä¸€ä¸ªç­¾å */
  foo(x: string): void;            /* ç¬¬äºŒä¸ªç­¾å */
  foo(x: number | string): void {  /* å®ç°ç­¾å */
  }
}
let c = new C();
c.foo(123);     // OKï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªç­¾å
c.foo('aa'); // OKï¼Œä½¿ç”¨ç¬¬äºŒä¸ªç­¾å
```

å¦‚æœä¸¤ä¸ªé‡è½½ç­¾åçš„åç§°å’Œå‚æ•°åˆ—è¡¨å‡ç›¸åŒï¼Œåˆ™ä¸ºé”™è¯¯ã€‚



>  [!important]
>
>  :exclamation:  æŒ‡æ˜ä¸€å¤„æ˜“é”™ç‚¹ï¼š
>
>  ä¸ºä»€ä¹ˆä¸èƒ½åƒ Java ä¸ cpp ä¸€æ ·ç›´æ¥å®ç°å‡½æ•°é‡è½½ï¼ˆåªè¦ä¿è¯å‡½æ•°åç›¸åŒå‚æ•°åˆ—è¡¨ä¸åŒå³å¯ï¼‰ï¼Ÿ

```typescript
// âŒ é”™è¯¯ï¼ŒTS ä¸æ”¯æŒè¿™æ ·å†™ä¸¤ä¸ªå‡½æ•°ä½“
foo(x: number): void {
  ...
}
foo(x: string): void {
  ...
}

```



ä»TypeScript å’Œ JavaScript çš„**è¯­è¨€æœ¬è´¨å·®å¼‚**è¯´èµ·ğŸ‘‡

> [!note]
>
> **æ ¸å¿ƒåŸå› ï¼šJavaScript æœ¬èº«ä¸æ”¯æŒå‡½æ•°é‡è½½**
>
> **TypeScript æ˜¯åŸºäº JavaScript æ„å»ºçš„ï¼Œæœ€ç»ˆä»£ç ä¹Ÿè¦ç¼–è¯‘æˆ JavaScript å»è¿è¡Œ**ã€‚



ä½† **JavaScript çš„å‡½æ•°æ˜¯â€œå¼±ç±»å‹+åŠ¨æ€çš„â€ï¼Œä¸ä¼šåŒºåˆ†å¤šä¸ªåŒåå‡½æ•°**ï¼š

```typescript
function foo(x) { console.log("ç¬¬ä¸€ä¸ª"); }
function foo(x, y) { console.log("ç¬¬äºŒä¸ª"); }

foo(1); // è°ƒç”¨çš„æ˜¯ç¬¬äºŒä¸ªå‡½æ•°ï¼Œå‰ä¸€ä¸ªè¢«è¦†ç›–äº†
```

åœ¨ JavaScript é‡Œï¼Œ**åå®šä¹‰çš„å‡½æ•°ä¼šè¦†ç›–å‰é¢çš„åŒåå‡½æ•°**ã€‚æ‰€ä»¥ JS æ ¹æœ¬å°±ä¸èƒ½çœŸæ­£æ”¯æŒå¤šä¸ªåŒåå‡½æ•° â€”â€” å®ƒåªä¿ç•™æœ€åä¸€ä¸ªã€‚

å› æ­¤`ArkTS`åˆ©ç”¨ **å¤šé‡å£°æ˜ + å•ä¸€å®ç°** å®ç°å‡½æ•°çš„é‡è½½



#### 7. æ„é€ å‡½æ•°

ç±»å£°æ˜å¯ä»¥åŒ…å«ç”¨äºåˆå§‹åŒ–å¯¹è±¡çŠ¶æ€çš„æ„é€ å‡½æ•°ã€‚

æ„é€ å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š

```typescript
constructor ([parameters]) {
  // ...
}
```

å¦‚æœæœªå®šä¹‰æ„é€ å‡½æ•°ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºå…·æœ‰ç©ºå‚æ•°åˆ—è¡¨çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œä¾‹å¦‚ï¼š

```typescript
class Point {
  x: number = 0;
  y: number = 0;
}
let p = new Point();
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé»˜è®¤æ„é€ å‡½æ•°ä½¿ç”¨å­—æ®µç±»å‹çš„é»˜è®¤å€¼æ¥åˆå§‹åŒ–å®ä¾‹ä¸­çš„å­—æ®µã€‚



**æ„é€ å‡½æ•°é‡è½½ç­¾å**

æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–å†™é‡è½½ç­¾åï¼ŒæŒ‡å®šæ„é€ å‡½æ•°çš„ä¸åŒè°ƒç”¨æ–¹å¼ã€‚

å…·ä½“æ–¹æ³•ä¸ºï¼Œä¸ºåŒä¸€ä¸ªæ„é€ å‡½æ•°å†™å…¥å¤šä¸ªåŒåä½†ç­¾åä¸åŒçš„æ„é€ å‡½æ•°å¤´ï¼Œæ„é€ å‡½æ•°å®ç°ç´§éšå…¶åã€‚

```typescript
class C {
  constructor(x: number)             /* ç¬¬ä¸€ä¸ªç­¾å */
  constructor(x: string)             /* ç¬¬äºŒä¸ªç­¾å */
  constructor(x: number | string) {  /* å®ç°ç­¾å */
  }
}
let c1 = new C(123);      // OKï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªç­¾å
let c2 = new C('abc');    // OKï¼Œä½¿ç”¨ç¬¬äºŒä¸ªç­¾å
```

å¦‚æœä¸¤ä¸ªé‡è½½ç­¾åçš„åç§°å’Œå‚æ•°åˆ—è¡¨å‡ç›¸åŒï¼Œåˆ™ä¸ºé”™è¯¯ã€‚

#### 8. å¯è§æ€§ä¿®é¥°ç¬¦

ç±»çš„æ–¹æ³•å’Œå±æ€§éƒ½å¯ä»¥ä½¿ç”¨å¯è§æ€§ä¿®é¥°ç¬¦ã€‚

å¯è§æ€§ä¿®é¥°ç¬¦åŒ…æ‹¬ï¼šprivateã€protectedå’Œpublicã€‚é»˜è®¤å¯è§æ€§ä¸ºpublicã€‚

**Publicï¼ˆå…¬æœ‰ï¼‰**

publicä¿®é¥°çš„ç±»æˆå‘˜ï¼ˆå­—æ®µã€æ–¹æ³•ã€æ„é€ å‡½æ•°ï¼‰åœ¨ç¨‹åºçš„ä»»ä½•å¯è®¿é—®è¯¥ç±»çš„åœ°æ–¹éƒ½æ˜¯å¯è§çš„ã€‚

**Privateï¼ˆç§æœ‰ï¼‰**

privateä¿®é¥°çš„æˆå‘˜ä¸èƒ½åœ¨å£°æ˜è¯¥æˆå‘˜çš„ç±»ä¹‹å¤–è®¿é—®ï¼Œä¾‹å¦‚ï¼š

```typescript
class C {
  public x: string = '';
  private y: string = '';
  set_y (new_y: string) {
    this.y = new_y; // OKï¼Œå› ä¸ºyåœ¨ç±»æœ¬èº«ä¸­å¯ä»¥è®¿é—®
  }
}
let c = new C();
c.x = 'a'; // OKï¼Œè¯¥å­—æ®µæ˜¯å…¬æœ‰çš„
c.y = 'b'; // ç¼–è¯‘æ—¶é”™è¯¯ï¼š'y'ä¸å¯è§
```

**Protectedï¼ˆå—ä¿æŠ¤ï¼‰**

protectedä¿®é¥°ç¬¦çš„ä½œç”¨ä¸privateä¿®é¥°ç¬¦éå¸¸ç›¸ä¼¼ï¼Œä¸åŒç‚¹æ˜¯protectedä¿®é¥°çš„æˆå‘˜å…è®¸åœ¨æ´¾ç”Ÿç±»ä¸­è®¿é—®ï¼Œä¾‹å¦‚ï¼š

```typescript
class Base {
  protected x: string = '';
  private y: string = '';
}
class Derived extends Base {
  foo() {
    this.x = 'a'; // OKï¼Œè®¿é—®å—ä¿æŠ¤æˆå‘˜
    this.y = 'b'; // ç¼–è¯‘æ—¶é”™è¯¯ï¼Œ'y'ä¸å¯è§ï¼Œå› ä¸ºå®ƒæ˜¯ç§æœ‰çš„
  }
}
```



#### 9.å¯¹è±¡å­—é¢é‡

> å¯ç”¨äºä»£æ›¿`new`åˆ›å»ºå®ä¾‹

> [!IMPORTANT]
>
> å¦‚æœç±»ä¸­åŒ…å«privateå±æ€§ï¼Œæ— æ³•é€šè¿‡å¯¹è±¡å­—é¢é‡åˆå§‹åŒ–è¯¥ç±»ã€‚



å¯¹è±¡å­—é¢é‡æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ç”¨äºåˆ›å»ºç±»å®ä¾‹å¹¶æä¾›ä¸€äº›åˆå§‹å€¼ã€‚å®ƒåœ¨æŸäº›æƒ…å†µä¸‹æ›´æ–¹ä¾¿ï¼Œå¯ä»¥ç”¨æ¥ä»£æ›¿newè¡¨è¾¾å¼ã€‚

å¯¹è±¡å­—é¢é‡çš„è¡¨ç¤ºæ–¹å¼æ˜¯ï¼šå°é—­åœ¨èŠ±æ‹¬å·å¯¹({})ä¸­çš„'å±æ€§åï¼šå€¼'çš„åˆ—è¡¨ã€‚

```typescript
class C {
  n: number = 0;
  s: string = '';
}

let c: C = {n: 42, s: 'foo'};
```

ArkTSæ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œå¦‚ä¸Šè¿°ç¤ºä¾‹æ‰€ç¤ºï¼Œå¯¹è±¡å­—é¢é‡åªèƒ½åœ¨å¯ä»¥æ¨å¯¼å‡ºè¯¥å­—é¢é‡ç±»å‹çš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚å…¶ä»–æ­£ç¡®çš„ä¾‹å­ï¼š

```typescript
class C {
  n: number = 0;
  s: string = '';
}

function foo(c: C) {}

let c: C

c = {n: 42, s: 'foo'};  // ä½¿ç”¨å˜é‡çš„ç±»å‹
foo({n: 42, s: 'foo'}); // ä½¿ç”¨å‚æ•°çš„ç±»å‹

function bar(): C {
  return {n: 42, s: 'foo'}; // ä½¿ç”¨è¿”å›ç±»å‹
}
```

ä¹Ÿå¯ä»¥åœ¨æ•°ç»„å…ƒç´ ç±»å‹æˆ–ç±»å­—æ®µç±»å‹ä¸­ä½¿ç”¨ï¼š

```typescript
class C {
  n: number = 0;
  s: string = '';
}
let cc: C[] = [{n: 1, s: 'a'}, {n: 2, s: 'b'}];
```



**ã€åä¾‹ã€‘**

```kotlin
class C {  count: number = 0
  getCount(): number {    return this.count  }}
```

**ã€æ­£ä¾‹ã€‘**

```kotlin
class C {  private count: number = 0
  public getCount(): number {    return this.count  }}
```



#### **10. Recordç±»å‹çš„å¯¹è±¡å­—é¢é‡**

> åŒ cpp java ä¸­çš„maoï¼Œåªæ˜¯å¯¹ **é”®** çš„æ•°æ®ç±»å‹æœ‰é™å®šï¼šåªèƒ½ä¸º `string` æˆ– `number`

æ³›å‹Record<K, V>ç”¨äºå°†ç±»å‹ï¼ˆé”®ç±»å‹ï¼‰çš„å±æ€§æ˜ å°„åˆ°å¦ä¸€ä¸ªç±»å‹ï¼ˆå€¼ç±»å‹ï¼‰ã€‚å¸¸ç”¨å¯¹è±¡å­—é¢é‡æ¥åˆå§‹åŒ–è¯¥ç±»å‹çš„å€¼ï¼š

```typescript
let map: Record<string, number> = {
  'John': 25,
  'Mary': 21,
}

map['John']; // 25
```

ç±»å‹`Key`å¯ä»¥æ˜¯å­—ç¬¦ä¸²ç±»å‹æˆ–æ•°å€¼ç±»å‹ï¼Œè€Œ`Value`å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚

```typescript
interface PersonInfo {
  age: number;
  salary: number;
}
let map: Record<string, PersonInfo> = {
  'John': { age: 25, salary: 10},
  'Mary': { age: 21, salary: 20}
}
```



#### 11. æ³›å‹

##### æ³›å‹ç±»

ç±»å’Œæ¥å£å¯ä»¥å®šä¹‰ä¸ºæ³›å‹ï¼Œå°†å‚æ•°æ·»åŠ åˆ°ç±»å‹å®šä¹‰ä¸­ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„ç±»å‹å‚æ•°Elementï¼š

```typescript
class CustomStack<Element> {		//Element:æ³›å‹åç§°ï¼Œè‡ªå®šä¹‰ï¼Œå¯ä»¥èµ·ä»»ä½•åå­—
  public push(e: Element):void {
    // ...
  }
}
```

è¦ä½¿ç”¨ç±»å‹CustomStackï¼Œå¿…é¡»ä¸ºæ¯ä¸ªç±»å‹å‚æ•°æŒ‡å®šç±»å‹å®å‚ï¼š

```typescript
let s = new CustomStack<string>();
s.push('hello');
```

ç¼–è¯‘å™¨åœ¨ä½¿ç”¨æ³›å‹ç±»å‹å’Œå‡½æ•°æ—¶ä¼šç¡®ä¿ç±»å‹å®‰å…¨ã€‚å‚è§ä»¥ä¸‹ç¤ºä¾‹ï¼š

```typescript
let s = new CustomStack<string>();
s.push(55); // å°†ä¼šäº§ç”Ÿç¼–è¯‘æ—¶é”™è¯¯
```

##### æ³›å‹å‡½æ•°

ä½¿ç”¨æ³›å‹å‡½æ•°å¯ç¼–å†™æ›´é€šç”¨çš„ä»£ç ã€‚æ¯”å¦‚è¿”å›æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„å‡½æ•°ï¼š

```typescript
function last(x: number[]): number {
  return x[x.length - 1];
}
last([1, 2, 3]); // 3
```

å¦‚æœéœ€è¦ä¸ºä»»ä½•æ•°ç»„å®šä¹‰ç›¸åŒçš„å‡½æ•°ï¼Œä½¿ç”¨ç±»å‹å‚æ•°å°†è¯¥å‡½æ•°å®šä¹‰ä¸ºæ³›å‹ï¼š

```typescript
function last<T>(x: T[]): T {
  return x[x.length - 1];
}
```

åœ¨å‡½æ•°è°ƒç”¨ä¸­ï¼Œç±»å‹å®å‚å¯ä»¥æ˜¾å¼æˆ–éšå¼è®¾ç½®ï¼š

```typescript
// æ˜¾å¼è®¾ç½®çš„ç±»å‹å®å‚
last<string>(['aa', 'bb']);
last<number>([1, 2, 3]);

// éšå¼è®¾ç½®çš„ç±»å‹å®å‚
// ç¼–è¯‘å™¨æ ¹æ®è°ƒç”¨å‚æ•°çš„ç±»å‹æ¥ç¡®å®šç±»å‹å®å‚
last([1, 2, 3]);
```